{"version":3,"file":"fetch.js","sourceRoot":"","sources":["../../../src/rsc/router/fetch.ts"],"names":[],"mappings":";;;AAAA,sCAAoD;AACpD,qCAAwC;AAEjC,KAAK,UAAU,KAAK,CAAC,KAAwB,EAAE,IAAkB;IACtE,2DAA2D;IAE3D,IAAI;QACF,OAAO,MAAM,IAAA,aAAa,EAAC,KAAK,EAAE,IAAI,CAAC,CAAC;KACzC;IAAC,OAAO,KAAU,EAAE;QACnB,MAAM,GAAG,GACP,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,YAAY,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC;QAE1F,IAAI,KAAK,YAAY,KAAK,EAAE;YAC1B,IACE,KAAK,CAAC,OAAO,CAAC,KAAK,CACjB,0GAA0G,CAC3G,EACD;gBACA,MAAM,IAAI,qBAAY,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;aAC5C;SACF;QACD,MAAM,KAAK,CAAC;KACb;AACH,CAAC;AApBD,sBAoBC","sourcesContent":["import { fetch as upstreamFetch } from 'expo/fetch';\nimport { NetworkError } from './errors';\n\nexport async function fetch(input: URL | RequestInfo, init?: RequestInit) {\n  //   throw new NetworkError('test error', input as string);\n\n  try {\n    return await upstreamFetch(input, init);\n  } catch (error: any) {\n    const url =\n      typeof input === 'string' ? input : input instanceof URL ? input.toString() : input.url;\n\n    if (error instanceof Error) {\n      if (\n        error.message.match(\n          /(Network request failed|fetch failed): (The network connection was lost|Could not connect to the server)/\n        )\n      ) {\n        throw new NetworkError(error.message, url);\n      }\n    }\n    throw error;\n  }\n}\n"]}