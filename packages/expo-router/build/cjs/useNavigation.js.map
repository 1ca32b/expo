{"version":3,"file":"useNavigation.js","names":["_native","data","require","_react","_interopRequireDefault","_Route","_matchers","obj","__esModule","default","useNavigation","parent","navigation","useUpstreamNavigation","contextKey","useContextKey","normalizedParent","React","useMemo","normalized","getNameFromFilePath","startsWith","relativePaths","parentNavigation","getParent","Error","resolveParentId","parentId","from","to","fromParts","split","filter","Boolean","toParts","part","length","pop","push","join"],"sources":["../../src/useNavigation.ts"],"sourcesContent":["import { useNavigation as useUpstreamNavigation, NavigationProp } from '@react-navigation/native';\nimport React from 'react';\n\nimport { useContextKey } from './Route';\nimport { getNameFromFilePath } from './matchers';\n\n/**\n * Return the navigation object for the current route.\n * @param parent Provide an absolute path like `/(root)` to the parent route or a relative path like `../../` to the parent route.\n * @returns the navigation object for the provided route.\n */\nexport function useNavigation<T = NavigationProp<ReactNavigation.RootParamList>>(\n  parent?: string\n): T {\n  const navigation = useUpstreamNavigation<any>();\n\n  const contextKey = useContextKey();\n  const normalizedParent = React.useMemo(() => {\n    if (!parent) {\n      return null;\n    }\n    const normalized = getNameFromFilePath(parent);\n\n    if (parent.startsWith('.')) {\n      return relativePaths(contextKey, parent);\n    }\n    return normalized;\n  }, [contextKey, parent]);\n\n  if (normalizedParent != null) {\n    const parentNavigation = navigation.getParent(normalizedParent);\n\n    // TODO: Maybe print a list of parents...\n\n    if (!parentNavigation) {\n      throw new Error(\n        `Could not find parent navigation with route \"${parent}\".` +\n          (normalizedParent !== parent ? ` (normalized: ${normalizedParent})` : '')\n      );\n    }\n    return parentNavigation;\n  }\n  return navigation;\n}\n\nexport function resolveParentId(contextKey: string, parentId?: string | null): string | null {\n  if (!parentId) {\n    return null;\n  }\n\n  if (parentId.startsWith('.')) {\n    return getNameFromFilePath(relativePaths(contextKey, parentId));\n  }\n  return getNameFromFilePath(parentId);\n}\n\n// Resolve a path like `../` relative to a path like `/foo/bar`\nfunction relativePaths(from: string, to: string): string {\n  const fromParts = from.split('/').filter(Boolean);\n  const toParts = to.split('/').filter(Boolean);\n\n  for (const part of toParts) {\n    if (part === '..') {\n      if (fromParts.length === 0) {\n        throw new Error(`Cannot resolve path \"${to}\" relative to \"${from}\"`);\n      }\n      fromParts.pop();\n    } else if (part === '.') {\n      // Ignore\n    } else {\n      fromParts.push(part);\n    }\n  }\n\n  return '/' + fromParts.join('/');\n}\n"],"mappings":"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"}