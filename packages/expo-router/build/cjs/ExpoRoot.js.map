{"version":3,"file":"ExpoRoot.js","names":["Object","defineProperty","exports","value","ExpoRoot","_expoConstants","data","_interopRequireDefault","require","_expoStatusBar","_react","_interopRequireWildcard","_Platform","_reactNativeSafeAreaContext","_NavigationContainer","_routerStore","_serverLocationContext","_Splash","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","_extends","assign","bind","target","arguments","length","source","key","apply","isTestEnv","process","env","NODE_ENV","INITIAL_METRICS","Platform","OS","frame","x","y","width","height","insets","top","left","right","bottom","undefined","hasViewControllerBasedStatusBarAppearance","Constants","expoConfig","ios","infoPlist","UIViewControllerBasedStatusBarAppearance","wrapper","ParentWrapper","Fragment","props","children","createElement","SafeAreaProvider","initialMetrics","StatusBar","style","ContextNavigator","initialUrl","window","URL","location","href","context","initialLocation","WrapperComponent","store","useInitializeExpoRouter","shouldShowTutorial","SplashScreen","hideAsync","Tutorial","Component","rootComponent","ref","navigationRef","initialState","linking","onUnhandledAction","documentTitle","enabled","ServerLocationContext","Provider","action","payload","message","type","JSON","stringify","name","Error","console","error"],"sources":["../../src/ExpoRoot.tsx"],"sourcesContent":["'use client';\n\nimport { NavigationAction } from '@react-navigation/native';\nimport Constants from 'expo-constants';\nimport { StatusBar } from 'expo-status-bar';\nimport React, { type PropsWithChildren, Fragment, type ComponentType } from 'react';\nimport { Platform } from 'react-native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport UpstreamNavigationContainer from './fork/NavigationContainer';\nimport { useInitializeExpoRouter } from './global-state/router-store';\nimport { ServerLocationContext } from './global-state/serverLocationContext';\nimport { RequireContext } from './types';\nimport { SplashScreen } from './views/Splash';\n\nexport type ExpoRootProps = {\n  context: RequireContext;\n  location?: URL;\n  wrapper?: ComponentType<PropsWithChildren>;\n};\n\nconst isTestEnv = process.env.NODE_ENV === 'test';\n\nconst INITIAL_METRICS =\n  Platform.OS === 'web' || isTestEnv\n    ? {\n        frame: { x: 0, y: 0, width: 0, height: 0 },\n        insets: { top: 0, left: 0, right: 0, bottom: 0 },\n      }\n    : undefined;\n\nconst hasViewControllerBasedStatusBarAppearance =\n  Platform.OS === 'ios' &&\n  !!Constants.expoConfig?.ios?.infoPlist?.UIViewControllerBasedStatusBarAppearance;\n\nexport function ExpoRoot({ wrapper: ParentWrapper = Fragment, ...props }: ExpoRootProps) {\n  /*\n   * Due to static rendering we need to wrap these top level views in second wrapper\n   * View's like <SafeAreaProvider /> generate a <div> so if the parent wrapper\n   * is a HTML document, we need to ensure its inside the <body>\n   */\n  const wrapper = ({ children }: PropsWithChildren) => {\n    return (\n      <ParentWrapper>\n        <SafeAreaProvider\n          // SSR support\n          initialMetrics={INITIAL_METRICS}>\n          {children}\n          {/* Users can override this by adding another StatusBar element anywhere higher in the component tree. */}\n          {!hasViewControllerBasedStatusBarAppearance && <StatusBar style=\"auto\" />}\n        </SafeAreaProvider>\n      </ParentWrapper>\n    );\n  };\n\n  return <ContextNavigator {...props} wrapper={wrapper} />;\n}\n\nconst initialUrl =\n  Platform.OS === 'web' && typeof window !== 'undefined'\n    ? new URL(window.location.href)\n    : undefined;\n\nfunction ContextNavigator({\n  context,\n  location: initialLocation = initialUrl,\n  wrapper: WrapperComponent = Fragment,\n}: ExpoRootProps) {\n  const store = useInitializeExpoRouter(context, initialLocation);\n\n  if (store.shouldShowTutorial()) {\n    SplashScreen.hideAsync();\n    if (process.env.NODE_ENV === 'development') {\n      const Tutorial = require('./onboard/Tutorial').Tutorial;\n      return (\n        <WrapperComponent>\n          <Tutorial />\n        </WrapperComponent>\n      );\n    } else {\n      // Ensure tutorial styles are stripped in production.\n      return null;\n    }\n  }\n\n  const Component = store.rootComponent;\n\n  return (\n    <UpstreamNavigationContainer\n      ref={store.navigationRef}\n      initialState={store.initialState}\n      linking={store.linking}\n      onUnhandledAction={onUnhandledAction}\n      documentTitle={{\n        enabled: false,\n      }}>\n      <ServerLocationContext.Provider value={initialLocation}>\n        <WrapperComponent>\n          <Component />\n        </WrapperComponent>\n      </ServerLocationContext.Provider>\n    </UpstreamNavigationContainer>\n  );\n}\n\nlet onUnhandledAction: (action: NavigationAction) => void;\n\nif (process.env.NODE_ENV !== 'production') {\n  onUnhandledAction = (action: NavigationAction) => {\n    const payload: Record<string, any> | undefined = action.payload;\n\n    let message = `The action '${action.type}'${\n      payload ? ` with payload ${JSON.stringify(action.payload)}` : ''\n    } was not handled by any navigator.`;\n\n    switch (action.type) {\n      case 'NAVIGATE':\n      case 'PUSH':\n      case 'REPLACE':\n      case 'JUMP_TO':\n        if (payload?.name) {\n          message += `\\n\\nDo you have a route named '${payload.name}'?`;\n        } else {\n          message += `\\n\\nYou need to pass the name of the screen to navigate to. This may be a bug.`;\n        }\n\n        break;\n      case 'GO_BACK':\n      case 'POP':\n      case 'POP_TO_TOP':\n        message += `\\n\\nIs there any screen to go back to?`;\n        break;\n      case 'OPEN_DRAWER':\n      case 'CLOSE_DRAWER':\n      case 'TOGGLE_DRAWER':\n        message += `\\n\\nIs your screen inside a Drawer navigator?`;\n        break;\n    }\n\n    message += `\\n\\nThis is a development-only warning and won't be shown in production.`;\n\n    if (process.env.NODE_ENV === 'test') {\n      throw new Error(message);\n    }\n    console.error(message);\n  };\n} else {\n  onUnhandledAction = function () {};\n}\n"],"mappings":"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"}