{"version":3,"file":"ErrorBoundary.js","names":["_bottomTabs","data","require","_react","_interopRequireDefault","_StyleSheet","_Text","_View","_Platform","_ScrollView","_reactNativeSafeAreaContext","_Pressable","_Link","obj","__esModule","default","useMetroSymbolication","process","env","NODE_ENV","LogBoxLog","parseErrorStack","error","logBoxLog","setLogBoxLog","React","useState","useEffect","isMounted","stack","log","level","message","content","substitutions","isComponentError","category","componentStack","symbolicate","symbolicatedLog","StackTrace","LogContext","LogBoxInspectorStackFrames","logData","symbolicated","createElement","style","flex","Provider","value","isDisabled","logs","selectedLogIndex","onRetry","type","ErrorBoundary","retry","inTabBar","useContext","BottomTabBarHeightContext","Wrapper","View","SafeAreaView","styles","container","gap","maxWidth","marginHorizontal","marginBottom","flexWrap","role","title","errorMessage","Link","href","link","Pressable","onPress","hovered","pressed","buttonInner","backgroundColor","buttonText","color","StyleSheet","create","padding","alignItems","justifyContent","fontSize","Platform","select","web","fontWeight","transitionDuration","paddingVertical","paddingHorizontal","borderColor","borderWidth","marginLeft","code","fontFamily","ios","android","subtitle","textDecorationStyle","textDecorationLine","textAlign"],"sources":["../../../src/views/ErrorBoundary.tsx"],"sourcesContent":["import type { LogBoxLog } from '@expo/metro-runtime/symbolicate';\nimport { BottomTabBarHeightContext } from '@react-navigation/bottom-tabs';\nimport React from 'react';\nimport { StyleSheet, Text, View, Platform, ScrollView } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\nimport { Pressable } from './Pressable';\nimport { ErrorBoundaryProps } from './Try';\nimport { Link } from '../link/Link';\n\nlet useMetroSymbolication: (error: Error) => LogBoxLog | null;\n\nif (process.env.NODE_ENV === 'development') {\n  const { LogBoxLog, parseErrorStack } =\n    require('@expo/metro-runtime/symbolicate') as typeof import('@expo/metro-runtime/symbolicate');\n  useMetroSymbolication = function (error: Error) {\n    const [logBoxLog, setLogBoxLog] = React.useState<LogBoxLog | null>(null);\n\n    React.useEffect(() => {\n      let isMounted = true;\n      const stack = parseErrorStack(error.stack);\n\n      const log = new LogBoxLog({\n        level: 'error',\n        message: {\n          content: error.message,\n          substitutions: [],\n        },\n        isComponentError: false,\n        stack,\n        category: error.message,\n        componentStack: [],\n      });\n\n      log.symbolicate('stack', (symbolicatedLog) => {\n        if (isMounted) {\n          setLogBoxLog(log);\n        }\n      });\n\n      return () => {\n        isMounted = false;\n      };\n    }, [error]);\n\n    return logBoxLog;\n  };\n} else {\n  useMetroSymbolication = function () {\n    return null;\n  };\n}\n\nlet StackTrace: React.ComponentType<{ logData: LogBoxLog | null }>;\n\nif (process.env.NODE_ENV === 'development') {\n  const { LogContext } = require('@expo/metro-runtime/build/error-overlay/Data/LogContext');\n  const {\n    LogBoxInspectorStackFrames,\n  } = require('@expo/metro-runtime/build/error-overlay/overlay/LogBoxInspectorStackFrames');\n\n  StackTrace = function ({ logData }: { logData: LogBoxLog | null }) {\n    if (!logData?.symbolicated?.stack?.stack) {\n      return null;\n    }\n    return (\n      <ScrollView style={{ flex: 1 }}>\n        <LogContext.Provider\n          value={{\n            isDisabled: false,\n            logs: [logData],\n            selectedLogIndex: 0,\n          }}>\n          <LogBoxInspectorStackFrames onRetry={function () {}} type=\"stack\" />\n        </LogContext.Provider>\n      </ScrollView>\n    );\n  };\n} else {\n  StackTrace = function () {\n    return <View style={{ flex: 1 }} />;\n  };\n}\n\nexport function ErrorBoundary({ error, retry }: ErrorBoundaryProps) {\n  const logBoxLog = useMetroSymbolication(error);\n  const inTabBar = React.useContext(BottomTabBarHeightContext);\n  const Wrapper = inTabBar ? View : SafeAreaView;\n\n  return (\n    <View style={styles.container}>\n      <Wrapper style={{ flex: 1, gap: 8, maxWidth: 720, marginHorizontal: 'auto' }}>\n        <View\n          style={{\n            marginBottom: 12,\n            gap: 4,\n            flexWrap: 'wrap',\n          }}>\n          <Text role=\"heading\" aria-level={1} style={styles.title}>\n            Something went wrong\n          </Text>\n          <Text role=\"heading\" aria-level={2} style={styles.errorMessage}>\n            Error: {error.message}\n          </Text>\n        </View>\n\n        <StackTrace logData={logBoxLog} />\n        {process.env.NODE_ENV === 'development' && (\n          <Link href=\"/_sitemap\" style={styles.link}>\n            Sitemap\n          </Link>\n        )}\n        <Pressable onPress={retry}>\n          {({ hovered, pressed }) => (\n            <View\n              style={[styles.buttonInner, (hovered || pressed) && { backgroundColor: 'white' }]}>\n              <Text\n                style={[\n                  styles.buttonText,\n                  {\n                    color: hovered || pressed ? 'black' : 'white',\n                  },\n                ]}>\n                Retry\n              </Text>\n            </View>\n          )}\n        </Pressable>\n      </Wrapper>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'black',\n    padding: 24,\n    alignItems: 'stretch',\n    justifyContent: 'center',\n  },\n  title: {\n    color: 'white',\n    fontSize: Platform.select({ web: 32, default: 24 }),\n    fontWeight: 'bold',\n  },\n  buttonText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: 'black',\n    ...Platform.select({\n      web: {\n        transitionDuration: '100ms',\n      },\n    }),\n  },\n  buttonInner: {\n    ...Platform.select({\n      web: {\n        transitionDuration: '100ms',\n      },\n    }),\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderColor: 'white',\n    borderWidth: 2,\n    marginLeft: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  code: {\n    fontFamily: Platform.select({\n      default: 'Courier',\n      ios: 'Courier New',\n      android: 'monospace',\n    }),\n    fontWeight: '500',\n  },\n  errorMessage: {\n    color: 'white',\n    fontSize: 16,\n  },\n  subtitle: {\n    color: 'white',\n    fontSize: 14,\n    marginBottom: 12,\n    // textAlign: \"center\",\n  },\n  link: {\n    color: 'rgba(255,255,255,0.4)',\n    textDecorationStyle: 'solid',\n    textDecorationLine: 'underline',\n    fontSize: 14,\n    textAlign: 'center',\n  },\n});\n"],"mappings":"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"}