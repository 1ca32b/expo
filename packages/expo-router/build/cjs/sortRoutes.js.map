{"version":3,"file":"sortRoutes.js","names":["_matchers","data","require","sortDynamicConvention","a","b","deep","sortRoutes","dynamic","length","i","aDynamic","bDynamic","notFound","s","aIndex","route","matchGroupName","bIndex","sortRoutesWithInitial","initialRouteName"],"sources":["../../src/sortRoutes.ts"],"sourcesContent":["import { DynamicConvention, RouteNode } from './Route';\nimport { matchGroupName } from './matchers';\n\nfunction sortDynamicConvention(a: DynamicConvention, b: DynamicConvention) {\n  if (a.deep && !b.deep) {\n    return 1;\n  }\n  if (!a.deep && b.deep) {\n    return -1;\n  }\n  return 0;\n}\n\nexport function sortRoutes(a: RouteNode, b: RouteNode): number {\n  if (a.dynamic && !b.dynamic) {\n    return 1;\n  }\n  if (!a.dynamic && b.dynamic) {\n    return -1;\n  }\n  if (a.dynamic && b.dynamic) {\n    if (a.dynamic.length !== b.dynamic.length) {\n      return b.dynamic.length - a.dynamic.length;\n    }\n\n    for (let i = 0; i < a.dynamic.length; i++) {\n      const aDynamic = a.dynamic[i];\n      const bDynamic = b.dynamic[i];\n\n      if (aDynamic.notFound && bDynamic.notFound) {\n        const s = sortDynamicConvention(aDynamic, bDynamic);\n        if (s) {\n          return s;\n        }\n      }\n      if (aDynamic.notFound && !bDynamic.notFound) {\n        return 1;\n      }\n      if (!aDynamic.notFound && bDynamic.notFound) {\n        return -1;\n      }\n\n      const s = sortDynamicConvention(aDynamic, bDynamic);\n      if (s) {\n        return s;\n      }\n    }\n    return 0;\n  }\n\n  const aIndex = a.route === 'index' || matchGroupName(a.route) != null;\n  const bIndex = b.route === 'index' || matchGroupName(b.route) != null;\n\n  if (aIndex && !bIndex) {\n    return -1;\n  }\n  if (!aIndex && bIndex) {\n    return 1;\n  }\n\n  return a.route.length - b.route.length;\n}\n\nexport function sortRoutesWithInitial(initialRouteName?: string) {\n  return (a: RouteNode, b: RouteNode): number => {\n    if (initialRouteName) {\n      if (a.route === initialRouteName) {\n        return -1;\n      }\n      if (b.route === initialRouteName) {\n        return 1;\n      }\n    }\n    return sortRoutes(a, b);\n  };\n}\n"],"mappings":"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"}