{"version":3,"file":"routes-manifest.js","names":["_getRoutes","data","require","_getServerManifest","createMockContextModule","map","contextModule","key","default","Object","defineProperty","value","createRoutesManifest","paths","options","routeTree","getRoutes","preserveApiRoutes","ignoreRequireErrors","ignoreEntryPoints","platform","getServerManifest"],"sources":["../../src/routes-manifest.ts"],"sourcesContent":["// This file runs in Node.js environments.\n// no relative imports\nimport { Options, getRoutes } from './getRoutes';\nimport { getServerManifest } from './getServerManifest';\nimport type { RequireContext } from './types';\n\nexport { Options } from './getRoutes';\n\nexport type RouteInfo<TRegex = string> = {\n  file: string;\n  page: string;\n  namedRegex: TRegex;\n  routeKeys: Record<string, string>;\n};\n\nexport type ExpoRoutesManifestV1<TRegex = string> = {\n  apiRoutes: RouteInfo<TRegex>[];\n  htmlRoutes: RouteInfo<TRegex>[];\n  notFoundRoutes: RouteInfo<TRegex>[];\n};\n\nfunction createMockContextModule(map: string[] = []) {\n  const contextModule = (key) => ({ default() {} });\n\n  Object.defineProperty(contextModule, 'keys', {\n    value: () => map,\n  });\n\n  return contextModule as RequireContext;\n}\n\nexport function createRoutesManifest(\n  paths: string[],\n  options: Options\n): ExpoRoutesManifestV1 | null {\n  // TODO: Drop this part for Node.js\n  const routeTree = getRoutes(createMockContextModule(paths), {\n    ...options,\n    preserveApiRoutes: true,\n    ignoreRequireErrors: true,\n    ignoreEntryPoints: true,\n    platform: 'web',\n  });\n\n  if (!routeTree) {\n    return null;\n  }\n  return getServerManifest(routeTree);\n}\n"],"mappings":";;;;;;;;;;;;AAEA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,mBAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,kBAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAHA;AACA;;AAoBA,SAASG,uBAAuBA,CAACC,GAAa,GAAG,EAAE,EAAE;EACnD,MAAMC,aAAa,GAAIC,GAAG,KAAM;IAAEC,OAAOA,CAAA,EAAG,CAAC;EAAE,CAAC,CAAC;EAEjDC,MAAM,CAACC,cAAc,CAACJ,aAAa,EAAE,MAAM,EAAE;IAC3CK,KAAK,EAAEA,CAAA,KAAMN;EACf,CAAC,CAAC;EAEF,OAAOC,aAAa;AACtB;AAEO,SAASM,oBAAoBA,CAClCC,KAAe,EACfC,OAAgB,EACa;EAC7B;EACA,MAAMC,SAAS,GAAG,IAAAC,sBAAS,EAACZ,uBAAuB,CAACS,KAAK,CAAC,EAAE;IAC1D,GAAGC,OAAO;IACVG,iBAAiB,EAAE,IAAI;IACvBC,mBAAmB,EAAE,IAAI;IACzBC,iBAAiB,EAAE,IAAI;IACvBC,QAAQ,EAAE;EACZ,CAAC,CAAC;EAEF,IAAI,CAACL,SAAS,EAAE;IACd,OAAO,IAAI;EACb;EACA,OAAO,IAAAM,sCAAiB,EAACN,SAAS,CAAC;AACrC"}