{"version":3,"file":"routes-manifest.js","names":["_getRoutes","data","require","_getServerManifest","createMockContextModule","map","contextModule","key","default","Object","defineProperty","value","createRoutesManifest","paths","routeTree","getRoutes","preserveApiRoutes","ignoreRequireErrors","ignoreEntryPoints","getServerManifest"],"sources":["../../src/routes-manifest.ts"],"sourcesContent":["// This file runs in Node.js environments.\n// no relative imports\nimport { getRoutes } from './getRoutes';\nimport { getServerManifest } from './getServerManifest';\nimport type { RequireContext } from './types';\n\nexport type RouteInfo<TRegex = string> = {\n  file: string;\n  page: string;\n  namedRegex: TRegex;\n  routeKeys: Record<string, string>;\n};\n\nexport type ExpoRoutesManifestV1<TRegex = string> = {\n  apiRoutes: RouteInfo<TRegex>[];\n  htmlRoutes: RouteInfo<TRegex>[];\n  notFoundRoutes: RouteInfo<TRegex>[];\n};\n\nfunction createMockContextModule(map: string[] = []) {\n  const contextModule = (key) => ({ default() {} });\n\n  Object.defineProperty(contextModule, 'keys', {\n    value: () => map,\n  });\n\n  return contextModule as RequireContext;\n}\n\nexport function createRoutesManifest(paths: string[]): ExpoRoutesManifestV1 | null {\n  // TODO: Drop this part for Node.js\n  const routeTree = getRoutes(createMockContextModule(paths), {\n    preserveApiRoutes: true,\n    ignoreRequireErrors: true,\n    ignoreEntryPoints: true,\n  });\n\n  if (!routeTree) {\n    return null;\n  }\n  return getServerManifest(routeTree);\n}\n"],"mappings":";;;;;;AAEA,SAAAA,WAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,UAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,mBAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,kBAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAHA;AACA;;AAkBA,SAASG,uBAAuBA,CAACC,GAAa,GAAG,EAAE,EAAE;EACnD,MAAMC,aAAa,GAAIC,GAAG,KAAM;IAAEC,OAAOA,CAAA,EAAG,CAAC;EAAE,CAAC,CAAC;EAEjDC,MAAM,CAACC,cAAc,CAACJ,aAAa,EAAE,MAAM,EAAE;IAC3CK,KAAK,EAAEA,CAAA,KAAMN;EACf,CAAC,CAAC;EAEF,OAAOC,aAAa;AACtB;AAEO,SAASM,oBAAoBA,CAACC,KAAe,EAA+B;EACjF;EACA,MAAMC,SAAS,GAAG,IAAAC,sBAAS,EAACX,uBAAuB,CAACS,KAAK,CAAC,EAAE;IAC1DG,iBAAiB,EAAE,IAAI;IACvBC,mBAAmB,EAAE,IAAI;IACzBC,iBAAiB,EAAE;EACrB,CAAC,CAAC;EAEF,IAAI,CAACJ,SAAS,EAAE;IACd,OAAO,IAAI;EACb;EACA,OAAO,IAAAK,sCAAiB,EAACL,SAAS,CAAC;AACrC"}