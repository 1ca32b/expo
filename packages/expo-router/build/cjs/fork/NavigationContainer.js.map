{"version":3,"file":"NavigationContainer.js","names":["_core","data","require","_native","_useBackButton","_interopRequireDefault","_useDocumentTitle","_useThenable","React","_interopRequireWildcard","_useLinking","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","obj","_extends","assign","bind","target","arguments","length","source","key","apply","global","REACT_NAVIGATION_DEVTOOLS","NavigationContainerInner","theme","DefaultTheme","linking","fallback","documentTitle","onReady","rest","ref","isLinkingEnabled","enabled","config","validatePathConfig","refContainer","useRef","useBackButton","useDocumentTitle","getInitialState","useLinking","independent","prefixes","useEffect","current","getStateFromPath","getPathFromState","getActionFromState","isResolved","initialState","useThenable","useImperativeHandle","linkingContext","useMemo","options","isReady","onReadyRef","createElement","LinkingContext","Provider","value","ThemeProvider","BaseNavigationContainer","NavigationContainer","forwardRef","_default","exports"],"sources":["../../../src/fork/NavigationContainer.tsx"],"sourcesContent":["// Forked from React Navigation in order to use a custom `useLinking` function.\n// https://github.com/react-navigation/react-navigation/blob/6.x/packages/native/src/NavigationContainer.tsx\nimport {\n  BaseNavigationContainer,\n  getActionFromState,\n  getPathFromState,\n  getStateFromPath,\n  NavigationContainerProps,\n  NavigationContainerRef,\n  ParamListBase,\n  validatePathConfig,\n} from '@react-navigation/core';\nimport {\n  DefaultTheme,\n  ThemeProvider,\n  DocumentTitleOptions,\n  LinkingOptions,\n  LinkingContext,\n  Theme,\n} from '@react-navigation/native';\nimport useBackButton from '@react-navigation/native/src/useBackButton';\nimport useDocumentTitle from '@react-navigation/native/src/useDocumentTitle';\nimport useThenable from '@react-navigation/native/src/useThenable';\nimport * as React from 'react';\n\nimport useLinking from './useLinking';\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var REACT_NAVIGATION_DEVTOOLS: WeakMap<\n    NavigationContainerRef<any>,\n    { readonly linking: LinkingOptions<any> }\n  >;\n}\n\nglobal.REACT_NAVIGATION_DEVTOOLS = new WeakMap();\n\ntype Props<ParamList extends object> = NavigationContainerProps & {\n  theme?: Theme;\n  linking?: LinkingOptions<ParamList>;\n  fallback?: React.ReactNode;\n  documentTitle?: DocumentTitleOptions;\n  onReady?: () => void;\n};\n\n/**\n * Container component which holds the navigation state designed for React Native apps.\n * This should be rendered at the root wrapping the whole app.\n *\n * @param props.initialState Initial state object for the navigation tree. When deep link handling is enabled, this will override deep links when specified. Make sure that you don't specify an `initialState` when there's a deep link (`Linking.getInitialURL()`).\n * @param props.onReady Callback which is called after the navigation tree mounts.\n * @param props.onStateChange Callback which is called with the latest navigation state when it changes.\n * @param props.theme Theme object for the navigators.\n * @param props.linking Options for deep linking. Deep link handling is enabled when this prop is provided, unless `linking.enabled` is `false`.\n * @param props.fallback Fallback component to render until we have finished getting initial state when linking is enabled. Defaults to `null`.\n * @param props.documentTitle Options to configure the document title on Web. Updating document title is handled by default unless `documentTitle.enabled` is `false`.\n * @param props.children Child elements to render the content.\n * @param props.ref Ref object which refers to the navigation object containing helper methods.\n */\nfunction NavigationContainerInner(\n  {\n    theme = DefaultTheme,\n    linking,\n    fallback = null,\n    documentTitle,\n    onReady,\n    ...rest\n  }: Props<ParamListBase>,\n  ref?: React.Ref<NavigationContainerRef<ParamListBase> | null>\n) {\n  const isLinkingEnabled = linking ? linking.enabled !== false : false;\n\n  if (linking?.config) {\n    validatePathConfig(linking.config);\n  }\n\n  const refContainer = React.useRef<NavigationContainerRef<ParamListBase>>(null);\n\n  useBackButton(refContainer);\n  useDocumentTitle(refContainer, documentTitle);\n\n  const { getInitialState } = useLinking(refContainer, {\n    independent: rest.independent,\n    enabled: isLinkingEnabled,\n    prefixes: [],\n    ...linking,\n  });\n\n  // Add additional linking related info to the ref\n  // This will be used by the devtools\n  React.useEffect(() => {\n    if (refContainer.current) {\n      REACT_NAVIGATION_DEVTOOLS.set(refContainer.current, {\n        get linking() {\n          return {\n            ...linking,\n            enabled: isLinkingEnabled,\n            prefixes: linking?.prefixes ?? [],\n            getStateFromPath: linking?.getStateFromPath ?? getStateFromPath,\n            getPathFromState: linking?.getPathFromState ?? getPathFromState,\n            getActionFromState: linking?.getActionFromState ?? getActionFromState,\n          };\n        },\n      });\n    }\n  });\n\n  const [isResolved, initialState] = useThenable(getInitialState);\n\n  React.useImperativeHandle(ref, () => refContainer.current);\n\n  const linkingContext = React.useMemo(() => ({ options: linking }), [linking]);\n\n  const isReady = rest.initialState != null || !isLinkingEnabled || isResolved;\n\n  const onReadyRef = React.useRef(onReady);\n\n  React.useEffect(() => {\n    onReadyRef.current = onReady;\n  });\n\n  React.useEffect(() => {\n    if (isReady) {\n      onReadyRef.current?.();\n    }\n  }, [isReady]);\n\n  if (!isReady) {\n    // This is temporary until we have Suspense for data-fetching\n    // Then the fallback will be handled by a parent `Suspense` component\n    return fallback as React.ReactElement;\n  }\n\n  return (\n    <LinkingContext.Provider value={linkingContext}>\n      <ThemeProvider value={theme}>\n        <BaseNavigationContainer\n          {...rest}\n          initialState={rest.initialState == null ? initialState : rest.initialState}\n          ref={refContainer}\n        />\n      </ThemeProvider>\n    </LinkingContext.Provider>\n  );\n}\n\nconst NavigationContainer = React.forwardRef(NavigationContainerInner) as <\n  RootParamList extends object = ReactNavigation.RootParamList,\n>(\n  props: Props<RootParamList> & {\n    ref?: React.Ref<NavigationContainerRef<RootParamList>>;\n  }\n) => React.ReactElement;\n\nexport default NavigationContainer;\n"],"mappings":"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"}