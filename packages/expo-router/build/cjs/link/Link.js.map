{"version":3,"file":"Link.js","names":["_reactSlot","data","require","React","_interopRequireWildcard","_Text","_interopRequireDefault","_Platform","_href","_useLinkToPathProps","_hooks","_useFocusEffect","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_extends","assign","bind","target","arguments","length","source","key","apply","Redirect","href","router","useRouter","useFocusEffect","replace","error","console","Link","exports","forwardRef","ExpoRouterLink","resolveHref","useInteropClassName","props","Platform","OS","style","useMemo","className","cssStyle","$$css","__routerLinkClassName","Array","isArray","useHrefAttrs","select","web","asChild","rel","download","hrefAttrs","push","rest","ref","resolvedHref","Error","event","useLinkToPathProps","onPress","Element","Slot","Text","createElement","onClick"],"sources":["../../../src/link/Link.tsx"],"sourcesContent":["// Fork of @react-navigation/native Link.tsx with `href` and `replace` support added and\n// `to` / `action` support removed.\nimport { Slot } from '@radix-ui/react-slot';\nimport * as React from 'react';\nimport { Text, TextProps, GestureResponderEvent, Platform } from 'react-native';\n\nimport { Href, resolveHref } from './href';\nimport useLinkToPathProps from './useLinkToPathProps';\nimport { useRouter } from '../hooks';\nimport { useFocusEffect } from '../useFocusEffect';\n\ninterface WebAnchorProps {\n  /**\n   * **Web only:** Specifies where to open the `href`.\n   *\n   * - **_self**: the current tab.\n   * - **_blank**: opens in a new tab or window.\n   * - **_parent**: opens in the parent browsing context. If no parent, defaults to **_self**.\n   * - **_top**: opens in the highest browsing context ancestor. If no ancestors, defaults to **_self**.\n   *\n   * This property is passed to the underlying anchor (`<a>`) tag.\n   *\n   * @default '_self'\n   *\n   * @example\n   * <Link href=\"https://expo.dev\" target=\"_blank\">Go to Expo in new tab</Link>\n   */\n  target?: '_self' | '_blank' | '_parent' | '_top' | (string & object);\n\n  /**\n   * **Web only:** Specifies the relationship between the `href` and the current route.\n   *\n   * Common values:\n   * - **nofollow**: Indicates to search engines that they should not follow the `href`. This is often used for user-generated content or links that should not influence search engine rankings.\n   * - **noopener**: Suggests that the `href` should not have access to the opening window's `window.opener` object, which is a security measure to prevent potentially harmful behavior in cases of links that open new tabs or windows.\n   * - **noreferrer**: Requests that the browser not send the `Referer` HTTP header when navigating to the `href`. This can enhance user privacy.\n   *\n   * The `rel` property is primarily used for informational and instructive purposes, helping browsers and web\n   * crawlers make better decisions about how to handle and interpret the links on a web page. It is important\n   * to use appropriate `rel` values to ensure that links behave as intended and adhere to best practices for web\n   * development and SEO (Search Engine Optimization).\n   *\n   * This property is passed to the underlying anchor (`<a>`) tag.\n   *\n   * @example\n   * <Link href=\"https://expo.dev\" rel=\"nofollow\">Go to Expo</Link>\n   */\n  rel?: string;\n\n  /**\n   * **Web only:** Specifies that the `href` should be downloaded when the user clicks on the link,\n   * instead of navigating to it. It is typically used for links that point to files that the user should download,\n   * such as PDFs, images, documents, etc.\n   *\n   * The value of the `download` property, which represents the filename for the downloaded file.\n   * This property is passed to the underlying anchor (`<a>`) tag.\n   *\n   * @example\n   * <Link href=\"/image.jpg\" download=\"my-image.jpg\">Download image</Link>\n   */\n  download?: string;\n}\n\nexport interface LinkProps extends Omit<TextProps, 'href'>, WebAnchorProps {\n  /** Path to route to. */\n  href: Href;\n\n  // TODO(EvanBacon): This may need to be extracted for React Native style support.\n  /** Forward props to child component. Useful for custom buttons. */\n  asChild?: boolean;\n\n  /** Should replace the current route without adding to the history. */\n  replace?: boolean;\n\n  /** Should push the current route, always adding to the history. */\n  push?: boolean;\n\n  /** On web, this sets the HTML `class` directly. On native, this can be used with CSS interop tools like Nativewind. */\n  className?: string;\n\n  onPress?: (e: React.MouseEvent<HTMLAnchorElement, MouseEvent> | GestureResponderEvent) => void;\n}\n\n/** Redirects to the href as soon as the component is mounted. */\nexport function Redirect({ href }: { href: Href }) {\n  const router = useRouter();\n  useFocusEffect(() => {\n    try {\n      router.replace(href);\n    } catch (error) {\n      console.error(error);\n    }\n  });\n  return null;\n}\n\nexport interface LinkComponent {\n  (props: React.PropsWithChildren<LinkProps>): JSX.Element;\n  /** Helper method to resolve an Href object into a string. */\n  resolveHref: typeof resolveHref;\n}\n\n/**\n * Component to render link to another route using a path.\n * Uses an anchor tag on the web.\n *\n * @param props.href Absolute path to route (e.g. `/feeds/hot`).\n * @param props.replace Should replace the current route without adding to the history.\n * @param props.push Should push the current route, always adding to the history.\n * @param props.asChild Forward props to child component. Useful for custom buttons.\n * @param props.children Child elements to render the content.\n * @param props.className On web, this sets the HTML `class` directly. On native, this can be used with CSS interop tools like Nativewind.\n */\nexport const Link = React.forwardRef(ExpoRouterLink) as unknown as LinkComponent;\n\nLink.resolveHref = resolveHref;\n\n// Mutate the style prop to add the className on web.\nfunction useInteropClassName(props: { style?: TextProps['style']; className?: string }) {\n  if (Platform.OS !== 'web') {\n    return props.style;\n  }\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return React.useMemo(() => {\n    if (props.className == null) {\n      return props.style;\n    }\n    const cssStyle = {\n      $$css: true,\n      __routerLinkClassName: props.className,\n    };\n\n    if (Array.isArray(props.style)) {\n      return [...props.style, cssStyle];\n    }\n    return [props.style, cssStyle];\n  }, [props.style, props.className]);\n}\n\nconst useHrefAttrs = Platform.select<\n  (props: Partial<LinkProps>) => { hrefAttrs?: any } & Partial<LinkProps>\n>({\n  web: function useHrefAttrs({ asChild, rel, target, download }: Partial<LinkProps>) {\n    return React.useMemo(() => {\n      const hrefAttrs = {\n        rel,\n        target,\n        download,\n      };\n      if (asChild) {\n        return hrefAttrs;\n      }\n      return {\n        hrefAttrs,\n      };\n    }, [asChild, rel, target, download]);\n  },\n  default: function useHrefAttrs() {\n    return {};\n  },\n});\n\nfunction ExpoRouterLink(\n  {\n    href,\n    replace,\n    push,\n    // TODO: This does not prevent default on the anchor tag.\n    asChild,\n    rel,\n    target,\n    download,\n    ...rest\n  }: LinkProps,\n  ref: React.ForwardedRef<Text>\n) {\n  // Mutate the style prop to add the className on web.\n  const style = useInteropClassName(rest);\n\n  // If not passing asChild, we need to forward the props to the anchor tag using React Native Web's `hrefAttrs`.\n  const hrefAttrs = useHrefAttrs({ asChild, rel, target, download });\n\n  const resolvedHref = React.useMemo(() => {\n    if (href == null) {\n      throw new Error('Link: href is required');\n    }\n    return resolveHref(href);\n  }, [href]);\n\n  let event;\n  if (push) event = 'PUSH';\n  if (replace) event = 'REPLACE';\n\n  const props = useLinkToPathProps({ href: resolvedHref, event });\n\n  const onPress = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent> | GestureResponderEvent) => {\n    if ('onPress' in rest) {\n      rest.onPress?.(e);\n    }\n    props.onPress(e);\n  };\n\n  const Element = asChild ? Slot : Text;\n\n  // Avoid using createElement directly, favoring JSX, to allow tools like Nativewind to perform custom JSX handling on native.\n  return (\n    <Element\n      ref={ref}\n      {...props}\n      {...hrefAttrs}\n      {...rest}\n      style={style}\n      {...Platform.select({\n        web: {\n          onClick: onPress,\n        } as any,\n        default: { onPress },\n      })}\n    />\n  );\n}\n"],"mappings":"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"}